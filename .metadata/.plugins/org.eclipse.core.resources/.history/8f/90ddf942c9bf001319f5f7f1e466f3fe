package com.sccl.summerreadingapp;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.ListView;
	 
public class ChooseUserFromListActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.choose_user_list);
        
        final String users[] = (String[])getIntent().getSerializableExtra("user");
        final String usersTypes[] = (String[])getIntent().getSerializableExtra("userType");
         
        ListView lv = (ListView) findViewById(R.id.user_list);
         
        // Adding items to listview
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.layout.choose_user_detail, R.id.user_name, users);
        lv.setAdapter(adapter);       
         
        // listening to single list item on click
        lv.setOnItemClickListener(new OnItemClickListener() {
          public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
             // selected item 
             String userName = users[position];
               
			 Intent returnIntent = new Intent();
			 returnIntent.putExtra("user", userName);
			 setResult(RESULT_OK,returnIntent);     
			 finish();			
			 }
        });
        
        
    }
     
   class LazyAdapter extends BaseAdapter {
     
        private Activity activity;
        private static LayoutInflater inflater=null;
        String users[];
        String userTypes[];
     
        public ChooseUserAdapter(Activity a, String users[], String userTypes[]) {
            activity = a;
            this.users = users; 
            this.userTypes = userTypes; 
            inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            imageLoader=new ImageLoader(activity.getApplicationContext());
        }
     
        public int getCount() {
            return users.length;
        }
     
        public Object getItem(int position) {
            return position;
        }
     
        public long getItemId(int position) {
            return position;
        }
     
        public View getView(int position, View convertView, ViewGroup parent) {
            View vi=convertView;
            if(convertView==null)
                vi = inflater.inflate(R.layout.list_row, null);
     
            TextView title = (TextView)vi.findViewById(R.id.title); // title
            TextView artist = (TextView)vi.findViewById(R.id.artist); // artist name
            TextView duration = (TextView)vi.findViewById(R.id.duration); // duration
            ImageView thumb_image=(ImageView)vi.findViewById(R.id.list_image); // thumb image
     
            HashMap&lt;String, String&gt; song = new HashMap&lt;String, String&gt;();
            song = data.get(position);
     
            // Setting all values in listview
            title.setText(song.get(CustomizedListView.KEY_TITLE));
            artist.setText(song.get(CustomizedListView.KEY_ARTIST));
            duration.setText(song.get(CustomizedListView.KEY_DURATION));
            imageLoader.DisplayImage(song.get(CustomizedListView.KEY_THUMB_URL), thumb_image);
            return vi;
        }
    }}